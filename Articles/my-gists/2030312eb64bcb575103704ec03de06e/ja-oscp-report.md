# Offensive Security OSCP Exam Report

## はじめに

Offensive Security Examの侵入テストレポートには、Offensive Security試験に合格するために行われたすべての取り組みが含まれています。
このレポートは、試験のすべての側面についての正確さと完全さの観点から評価されます。
このレポートの目的は、学生が侵入テストの方法論や技術的な知識を完全に理解し、Offensive Security Certified Professionalの資格を取得するための能力を持っていることを確認することです。

## 目的

このアセスメントの目的は、Offensive Security Examネットワークに対する内部侵入テストを実行することです。
学生には、目的のゴールにアクセスするための方法論的アプローチに従うように課題が与えられます。
このテストでは、実際の侵入テストと同様に、始めから終わりまでの全体的なレポートを含めています。
このドキュメントの後半に、このコースを合格するために期待される情報を十分に提供するサンプルレポートがすでに作成されています。
レポートの作成を行う際のガイドラインとして、サンプルレポートを使用してください。

## 要件

学生は、以下のセクションを含めて、この侵入テストレポートを完全に記入する必要があります：

- 全体的なハイレベルの要約と推奨事項（非技術的）
- 方法論の解説と取り組んだ手順の詳細な概要
- 各発見物には、スクリーンショット、解説、サンプルコード、適用可能な場合はproof.txtを含める
- 含まれていなかった追加の項目

# ハイレベルの要約

私はOffensive Security Examに対する内部侵入テストを実行するように課されました。
内部侵入テストは、内部的に接続されたシステムに対する専用の攻撃です。
このテストの焦点は、攻撃者のような攻撃を実行し、Offensive Securityの内部試験システム - THINC.localドメインに浸透しようとすることです。
私の全体的な目標は、ネットワークを評価し、システムを特定し、欠陥を悪用し、その結果をOffensive Securityに報告することでした。

内部侵入テストを実行する際に、Offensive Securityのネットワークでいくつかの懸念すべき脆弱性が特定されました。
攻撃を実行する際に、古いパッチとセキュリティ設定の不備により、複数のマシンにアクセスできました。
テスト中、私は複数のシステムで管理レベルのアクセス権を持っていました。
すべてのシステムが成功裏に悪用され、アクセスが許可されました。
これらのシステムと、アクセスが取得された方法の簡単な説明は以下の通りです：

- 192.168.xx.xx（ホスト名） - 初期エクスプロイトの名前
- 192.168.xx.xx（ホスト名） - 初期エクスプロイトの名前
- 192.168.xx.xx（ホスト名） - 初期エクスプロイトの名前
- 192.168.xx.xx（ホスト名） - 初期エクスプロイトの名前
- 192.168.xx.xx（ホスト名） - BOF

## 推奨事項

テスト中に特定された脆弱性を修正し、将来的にこれらのシステムを攻撃者が悪用できないようにすることを推奨します。
これらのシステムは頻繁にパッチを適用する必要があり、一度パッチを適用したら、後日発見される追加の脆弱性を保護するために定期的なパッチプログラムに残る必要があります。

# 方法論

私は、Offensive Security Exam環境のセキュリティがどれだけよく保護されているかをテストするのに効果的な、広く採用された侵入テストのアプローチを利用しました。
以下は、さまざまなシステムを特定し、悪用する方法を特定した方法の詳細な概要です。

## 情報収集

侵入テストの情報収集部分は、侵入テストのスコープを特定することに焦点を当てています。
この侵入テストでは、試験ネットワークを悪用するように課せられました。
具体的なIPアドレスは以下の通りです：

**試験ネットワーク**

- 192.168.
- 192.168.
- 192.168.
- 192.168.
- 192.168.

## 侵入



評価の侵入部分は、さまざまなシステムにアクセスすることに重点を置いています。
この侵入テストでは、**X**のシステムのうち**X**を正常にアクセスできました。

### システムIP: 192.168.x.x

#### サービスの列挙

侵入テストのサービスの列挙部分は、システムまたはシステム上で実行されているサービスに関する情報を収集することに焦点を当てています。
これは、システムへの攻撃ベクトルの詳細な情報を提供するため、攻撃者にとって価値があります。
システム上で実行されているアプリケーションを理解することは、実際の侵入テストを行う前に攻撃者にとって必要な情報を提供します。
場合によっては、一部のポートがリストされていないことがあります。

サーバーのIPアドレス | 開いているポート
------------------|----------------------------------------
192.168.x.x       | **TCP**: 1433,3389\
**UDP**: 1434,161

**Nmapスキャンの結果:**

*初期シェルの脆弱性が悪用されました*

*初期シェルが取得された場所に関する追加情報*

**脆弱性の説明:**

**脆弱性の修正:**

**深刻度:**

**コードの概念証明はこちら:**

**Local.txtの証拠スクリーンショット**

**Local.txtの内容**

#### 特権昇格

*追加の特権昇格情報*

**悪用された脆弱性:**

**脆弱性の説明:**

**脆弱性の修正:**

**深刻度:**

**エクスプロイトコード:**

**証拠スクリーンショットはこちら:**

**Proof.txtの内容:**

### システムIP: 192.168.x.x

#### サービスの列挙

サーバーのIPアドレス | 開いているポート
------------------|----------------------------------------
192.168.x.x       | **TCP**: 1433,3389\
**UDP**: 1434,161

**Nmapスキャンの結果:**

*初期シェルの脆弱性が悪用されました*

*初期シェルが取得された場所に関する追加情報*

**脆弱性の説明:**

**脆弱性の修正:**

**深刻度:**

**コードの概念証明はこちら:**

**Local.txtの証拠スクリーンショット**

**Local.txtの内容**

#### 特権昇格

*追加の特権昇格情報*

**悪用された脆弱性:**

**脆弱性の説明:**

**脆弱性の修正:**

**深刻度:**

**エクスプロイトコード:**

**証拠スクリーンショットはこちら:**

**Proof.txtの内容:**

### システムIP: 192.168.x.x

#### サービスの列挙

サーバーのIPアドレス | 開いているポート
------------------|----------------------------------------
192.168.x.x       | **TCP**: 1433,3389\
**UDP**: 1434,161

**Nmapスキャンの結果:**

*初期シェルの脆弱性が悪用されました*

*初期シェルが取得された場所に関する追加情報*

**脆弱性の説明:**

**脆弱性の修正:**

**深刻度:**

**コードの概念証明はこちら:**

**Local.txtの証拠スクリーンショット**

**Local.txtの内容**

#### 特権昇格

*追加の特権昇格情報*

**悪用された脆弱性:**

**脆弱性の説明:**

**脆弱性の修正:**

**深刻度:**

**エクスプロイトコード:**

**証拠スクリーンショットはこちら:**

**Proof.txtの内容:**

### システムIP: 192.168.x.x

#### サービスの列挙

サーバーのIPアドレス | 開いているポート
------------------|----------------------------------------
192.168.x.x       | **TCP**: 1433,3389\
**UDP**: 1434,161

**Nmapスキャンの結果:**

*初期シェルの脆弱性が悪用されました*

*初期シェルが取得された場所に関する追加情報*

**脆弱性の説明:**

**脆弱性の修正:**

**深刻度:**

**コードの概念証明はこちら:**

**Local.txtの証拠スクリーンショット**

**Local.txtの内容**

#### 特権昇格

*追加の特権昇格情報*

**悪用された脆弱性:**

**脆弱性の説明:**

**脆弱性の修正:**

**深刻度:**

**エクスプロイトコード:**

**証拠スクリーンショットはこちら:**

**Proof

.txtの内容:**

### システムIP: 192.168.x.x

**悪用された脆弱性: bof**

BOF NOTESでこのセクションを記入してください。

**証拠スクリーンショット:**

**完全なバッファオーバーフローコード:**

Windowsの完全なバッファオーバーフローコードについては、付録1を参照してください。

## アクセスの維持

システムへのアクセスを維持することは、私たち攻撃者にとって重要です。システムが悪用された後でも、再びシステムにアクセスできるようにすることは貴重です。
アクセスの維持フェーズは、焦点を当てた攻撃が発生した後（つまり、バッファオーバーフローなど）、再びシステム上で管理者アクセス権を持っていることを確認することに焦点を当てています。
多くのエクスプロイトは一度だけ可能であり、エクスプロイトを実行した後、システムに再びアクセスすることができない場合があります。

## ハウスクリーニング

アセスメントのハウスクリーニング部分では、侵入テストの痕跡が削除されることを確認します。
組織のコンピューターにツールやユーザーアカウントの断片が残っていると、将来的にセキュリティ問題が発生する可能性があります。
侵入テストの痕跡が残らないように細心の注意を払いましょう。

試験ネットワークからトロフィーを収集した後、私はシステムからすべてのユーザーアカウントとパスワード、およびインストールされたMeterpreterサービスを削除しました。
Offensive Securityは、システムからユーザーアカウントやサービスを削除する必要はありません。

# 追加アイテム

## 付録 - 証拠とLocalの内容：

IP（ホスト名） | Local.txtの内容 | Proof.txtの内容
--------------|--------------------|-------------------
192.168.x.x   | ハッシュ_ここに          | ハッシュ_ここに
192.168.x.x   | ハッシュ_ここに          | ハッシュ_ここに
192.168.x.x   | ハッシュ_ここに          | ハッシュ_ここに
192.168.x.x   | ハッシュ_ここに          | ハッシュ_ここに
192.168.x.x   | ハッシュ_ここに          | ハッシュ_ここに

## 付録 - Metasploit/Meterpreterの使用

試験では、Metasploit/Meterpreterの使用を以下のマシンで行いました： `192.168.x.x`

## 付録 - 完全なバッファオーバーフローコード

```
ここにコード
```